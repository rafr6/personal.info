<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>File Vault</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f0f2f5; margin:0; padding:0; }
    .box { max-width:800px; margin:30px auto; padding:20px; background:#fff; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,.1); }
    h2,h3 { text-align:center; }
    .hidden { display:none; }
    input[type="text"], input[type="password"], input[type="file"] {
      padding:8px; margin:5px 0; border:1px solid #ccc; border-radius:5px; width:100%;
    }
    button { padding:6px 12px; margin:2px; border:none; border-radius:5px; background:#007bff; color:#fff; cursor:pointer; }
    button:hover { background:#0056b3; }
    .folder { margin:15px 0; padding:10px; background:#f8f9fa; border-radius:6px; border:1px solid #ddd; }
    .file-list { margin-top:8px; }
    .file-item { padding:6px; margin:5px 0; background:#fff; border:1px solid #ddd; border-radius:4px; display:flex; justify-content:space-between; align-items:center; }
    iframe, video, img { width:100%; max-height:400px; margin-top:10px; border:1px solid #ccc; border-radius:6px; background:#000; }
    @media(max-width:600px){ iframe,video,img{max-height:250px;} }
  </style>
</head>
<body>
  <!-- Login Box -->
  <div class="box" id="loginBox">
    <h2>‡¶≤‡¶ó‡¶á‡¶®</h2>
    <input type="password" id="passwordInput" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®">
    <button onclick="login()">‡¶≤‡¶ó‡¶á‡¶®</button>
  </div>

  <!-- Main App -->
  <div class="box hidden" id="appBox">
    <h2>üìÅ File Vault</h2>
    <button onclick="logout()">‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</button>

    <h3>‡¶®‡¶§‡ßÅ‡¶® ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø</h3>
    <input type="text" id="folderName" placeholder="‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶¶‡¶ø‡¶®">
    <button onclick="createFolder()">‡¶§‡ßà‡¶∞‡¶ø</button>

    <div id="folders"></div>

    <h3>Preview</h3>
    <div id="preview"></div>
  </div>

<script>
  const PASS_KEY = "filevault_pass";
  let data = JSON.parse(localStorage.getItem("filevault_data") || "{}");

  // Login system
  function login(){
    let pass = document.getElementById('passwordInput').value.trim();
    let saved = localStorage.getItem(PASS_KEY);
    if(!saved){
      if(pass){
        localStorage.setItem(PASS_KEY, pass);
        alert("‚úÖ ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶∏‡ßá‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!");
        showApp();
      } else {
        alert("‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®");
      }
    } else {
      if(pass === saved){ showApp(); }
      else { alert("‚ùå ‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°!"); }
    }
  }

  function logout(){
    document.getElementById('appBox').classList.add('hidden');
    document.getElementById('loginBox').classList.remove('hidden');
  }

  function showApp(){
    document.getElementById('loginBox').classList.add('hidden');
    document.getElementById('appBox').classList.remove('hidden');
    renderFolders();
  }

  function save(){ localStorage.setItem("filevault_data", JSON.stringify(data)); }

  // Create folder
  function createFolder(){
    let name = document.getElementById('folderName').value.trim();
    if(!name) return alert("‚ö† ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®");
    if(!data[name]) data[name] = [];
    save();
    renderFolders();
    document.getElementById('folderName').value="";
  }

  // Render all folders
  function renderFolders(){
    let box = document.getElementById('folders');
    box.innerHTML="";
    Object.keys(data).forEach(folder=>{
      let div = document.createElement('div');
      div.className="folder";
      let title = document.createElement('h4');
      title.textContent = "üìÇ " + folder;
      div.appendChild(title);

      let input = document.createElement('input');
      input.type = "file";
      input.multiple = true;
      input.onchange = (e)=>uploadFiles(folder, e.target.files);
      div.appendChild(input);

      let list = document.createElement('div');
      list.className="file-list";
      data[folder].forEach((f,i)=>{
        let item = document.createElement('div');
        item.className="file-item";
        item.innerHTML = `<span>${f.name}</span>`;
        let actions = document.createElement('div');
        actions.innerHTML = `
          <button onclick="previewFile('${folder}',${i})">üëÅ Preview</button>
          <button onclick="downloadFile('${folder}',${i})">‚¨á Download</button>
          <button onclick="deleteFile('${folder}',${i})">üóë Delete</button>`;
        item.appendChild(actions);
        list.appendChild(item);
      });
      div.appendChild(list);
      box.appendChild(div);
    });
  }

  // Upload files
  function uploadFiles(folder, files){
    [...files].forEach(file=>{
      let reader = new FileReader();
      reader.onload = e=>{
        data[folder].push({name:file.name, type:file.type, data:e.target.result});
        save();
        renderFolders();
      };
      reader.readAsDataURL(file);
    });
  }

  // Preview files
  function previewFile(folder,i){
    let f = data[folder][i];
    let box = document.getElementById('preview');
    if(f.type.includes('pdf')){
      box.innerHTML = `<iframe src="${f.data}" frameborder="0"></iframe>`;
    } else if(f.type.includes('video')){
      box.innerHTML = `<video controls controlsList="nodownload" src="${f.data}"></video>`;
    } else if(f.type.includes('image')){
      box.innerHTML = `<img src="${f.data}" alt="${f.name}">`;
    } else {
      box.innerHTML = `<a href="${f.data}" download="${f.name}">üì• Download ${f.name}</a>`;
    }
  }

  // Download
  function downloadFile(folder,i){
    let f = data[folder][i];
    let a = document.createElement('a');
    a.href = f.data; a.download = f.name; a.click();
  }

  // Delete
  function deleteFile(folder,i){
    if(confirm("‚ö† ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Æ‡ßÅ‡¶õ‡¶¨‡ßá‡¶®?")){
      data[folder].splice(i,1);
      save();
      renderFolders();
      document.getElementById('preview').innerHTML="";
    }
  }
</script>
</body>
</html>
